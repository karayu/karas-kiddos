"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/content/generate/route";
exports.ids = ["app/api/content/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Fgenerate%2Froute&page=%2Fapi%2Fcontent%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Fgenerate%2Froute&page=%2Fapi%2Fcontent%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_karayu_projects_karaskiddos_app_api_content_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/content/generate/route.ts */ \"(rsc)/./app/api/content/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/content/generate/route\",\n        pathname: \"/api/content/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/content/generate/route\"\n    },\n    resolvedPagePath: \"/Users/karayu/projects/karaskiddos/app/api/content/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_karayu_projects_karaskiddos_app_api_content_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/content/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb250ZW50JTJGZ2VuZXJhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNvbnRlbnQlMkZnZW5lcmF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvbnRlbnQlMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmthcmF5dSUyRnByb2plY3RzJTJGa2FyYXNraWRkb3MlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa2FyYXl1JTJGcHJvamVjdHMlMkZrYXJhc2tpZGRvcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0I7QUFDakc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJhc2tpZGRvcy8/Zjg1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMva2FyYXl1L3Byb2plY3RzL2thcmFza2lkZG9zL2FwcC9hcGkvY29udGVudC9nZW5lcmF0ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY29udGVudC9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NvbnRlbnQvZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvbnRlbnQvZ2VuZXJhdGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMva2FyYXl1L3Byb2plY3RzL2thcmFza2lkZG9zL2FwcC9hcGkvY29udGVudC9nZW5lcmF0ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29udGVudC9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Fgenerate%2Froute&page=%2Fapi%2Fcontent%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/content/generate/route.ts":
/*!*******************************************!*\
  !*** ./app/api/content/generate/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n/* harmony import */ var _lib_gemini__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/gemini */ \"(rsc)/./lib/gemini.ts\");\n\n\n\nasync function POST(req) {\n    try {\n        if (!process.env.GEMINI_API_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"GEMINI_API_KEY not configured\"\n            }, {\n                status: 500\n            });\n        }\n        if ( false || !process.env.SUPABASE_SERVICE_ROLE_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Supabase not configured\"\n            }, {\n                status: 500\n            });\n        }\n        const body = await req.json();\n        const db = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getServiceClient)();\n        // For checklist type, generate an image using Gemini 2.5 Flash\n        if (body.type === \"checklist\") {\n            const imagePrompt = `Create a illustrated checklist. this checklist should have a whimsical theme, appropriate for looking fun/exciting to a 5 year old. Make the protagonist a rainbow unicorn, excited to do each of the steps. Make it look professionally illustrated by a children's book author like Hollie Mengert.\n\nThe name of the checklist should be: Rhea Unicorn goes to bed\n\nOn the left column, the checklist should have imagery:\n\n1) On the first row, it should show the rainbow unicorn brushing her teeth with a proud expression on her face. Use bright colorful colors.\n\n2) On the second row, it should show the rainbow unicorn putting on pajamas but struggling with it\n\n3) On the third row, it should show the rainbow unicorn reading a book in bed with her eyes closed\n\nMake the unicorn images take up half the page.\n\nOn the right column, it should just feature 3 blank rows (so that the child can write in them)\n\nMake it good!`;\n            // Use Gemini 2.5 Flash for image generation\n            // Note: Gemini models are text models and don't generate images directly\n            // We'll skip image generation for now and create the checklist\n            let imageUrl = null;\n            // Skip image generation for now - Gemini doesn't support it\n            // TODO: Integrate with actual image generation API (Imagen, DALL-E, etc.)\n            console.log(\"Skipping image generation - Gemini 2.5 Flash is a text model\");\n            // Parse routine items from prompt if available\n            let steps = [\n                {\n                    label: \"brush teeth\",\n                    tip: \"Great job brushing!\"\n                },\n                {\n                    label: \"put on pajamas\",\n                    tip: \"You're doing great!\"\n                },\n                {\n                    label: \"read book\",\n                    tip: \"Time for a story!\"\n                }\n            ];\n            if (body.prompt?.includes(\"routine includes:\")) {\n                const routinePart = body.prompt.split(\"routine includes:\")[1]?.split(\".\")[0];\n                if (routinePart) {\n                    steps = routinePart.split(\",\").map((s)=>({\n                            label: s.trim(),\n                            tip: `Great job on ${s.trim()}!`\n                        }));\n                }\n            }\n            const parsed = {\n                title: \"Rhea Unicorn goes to bed\",\n                steps,\n                image_url: imageUrl,\n                image_prompt: imagePrompt\n            };\n            try {\n                const { data: inserted, error } = await db.from(\"content_items\").insert({\n                    profile_id: null,\n                    child_id: null,\n                    title: parsed.title,\n                    category: body.category,\n                    type: body.type,\n                    body: parsed,\n                    cover_url: imageUrl,\n                    is_public: true\n                }).select().single();\n                if (error) {\n                    console.error(\"Database insert error:\", error);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: error.message\n                    }, {\n                        status: 500\n                    });\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    content: inserted\n                });\n            } catch (dbError) {\n                console.error(\"Database error:\", dbError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: dbError.message || \"Database error\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // For other types, use text generation with Gemini\n        const genAI = (0,_lib_gemini__WEBPACK_IMPORTED_MODULE_2__.getGemini)();\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.5-flash\"\n        });\n        let fullPrompt = \"You are a helper for parents of young children.\\n\\n\";\n        const basePrompt = body.prompt ?? \"Create a supportive, age-appropriate piece for a preschooler.\";\n        if (body.type === \"story\") {\n            fullPrompt += `${basePrompt}\\n\\nCreate a supportive personalized story for a child about this situation. Return ONLY valid JSON in this exact format: {\"title\": \"Story Title\", \"outline\": [\"point 1\", \"point 2\"], \"story_html\": \"<p>Full story HTML here</p>\"}`;\n        } else if (body.type === \"song_lyrics\") {\n            fullPrompt += `${basePrompt}\\n\\nCreate playful bedtime song lyrics only. Return ONLY valid JSON: {\"title\": \"Song Title\", \"lyrics\": \"Full lyrics text\", \"style\": \"lullaby\"}`;\n        } else if (body.type === \"schedule\" || body.type === \"calendar\") {\n            fullPrompt += `${basePrompt}\\n\\nCreate a simple schedule. Return ONLY valid JSON: {\"title\": \"Schedule Title\", \"items\": [{\"time\": \"9:00 AM\", \"label\": \"Activity\"}]}`;\n        }\n        fullPrompt += \"\\n\\nImportant: Return ONLY the JSON object, no markdown code blocks, no explanation text.\";\n        const completion = await model.generateContent(fullPrompt);\n        let text = completion.response.text();\n        // Clean up markdown code blocks if present\n        text = text.trim();\n        if (text.startsWith(\"```json\")) {\n            text = text.replace(/^```json\\s*/, \"\").replace(/\\s*```$/, \"\");\n        } else if (text.startsWith(\"```\")) {\n            text = text.replace(/^```\\s*/, \"\").replace(/\\s*```$/, \"\");\n        }\n        let parsed;\n        try {\n            parsed = JSON.parse(text);\n        } catch (parseError) {\n            console.error(\"JSON parse error:\", parseError, \"Text was:\", text.substring(0, 200));\n            // Fallback: create a simple structure\n            parsed = {\n                title: \"Generated Story\",\n                outline: [\n                    \"Introduction\",\n                    \"Main story\",\n                    \"Conclusion\"\n                ],\n                story_html: `<p>${text.replace(/\\n/g, \"</p><p>\")}</p>`\n            };\n        }\n        const { data: inserted, error } = await db.from(\"content_items\").insert({\n            profile_id: null,\n            child_id: null,\n            title: parsed.title ?? \"Generated\",\n            category: body.category,\n            type: body.type,\n            body: parsed,\n            is_public: true\n        }).select().single();\n        if (error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            content: inserted\n        });\n    } catch (e) {\n        console.error(\"Generate error:\", e);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: e.message || \"Generation failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NvbnRlbnQvZ2VuZXJhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNjO0FBQ2hCO0FBU2xDLGVBQWVHLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEVBQUU7WUFDL0IsT0FBT1AscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFnQyxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDckY7UUFDQSxJQUFJLE1BQXFDLElBQUksQ0FBQ0wsUUFBUUMsR0FBRyxDQUFDTSx5QkFBeUIsRUFBRTtZQUNuRixPQUFPWixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQTBCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMvRTtRQUVBLE1BQU1HLE9BQVEsTUFBTVQsSUFBSUksSUFBSTtRQUM1QixNQUFNTSxLQUFLYixzRUFBZ0JBO1FBRTNCLCtEQUErRDtRQUMvRCxJQUFJWSxLQUFLRSxJQUFJLEtBQUssYUFBYTtZQUM3QixNQUFNQyxjQUFjLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7YUFnQmQsQ0FBQztZQUVSLDRDQUE0QztZQUM1Qyx5RUFBeUU7WUFDekUsK0RBQStEO1lBQy9ELElBQUlDLFdBQTBCO1lBRTlCLDREQUE0RDtZQUM1RCwwRUFBMEU7WUFDMUVDLFFBQVFDLEdBQUcsQ0FBQztZQUdaLCtDQUErQztZQUMvQyxJQUFJQyxRQUFRO2dCQUNWO29CQUFFQyxPQUFPO29CQUFlQyxLQUFLO2dCQUFzQjtnQkFDbkQ7b0JBQUVELE9BQU87b0JBQWtCQyxLQUFLO2dCQUFzQjtnQkFDdEQ7b0JBQUVELE9BQU87b0JBQWFDLEtBQUs7Z0JBQW9CO2FBQ2hEO1lBRUQsSUFBSVQsS0FBS1UsTUFBTSxFQUFFQyxTQUFTLHNCQUFzQjtnQkFDOUMsTUFBTUMsY0FBY1osS0FBS1UsTUFBTSxDQUFDRyxLQUFLLENBQUMsb0JBQW9CLENBQUMs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QUNQQyxPQUFPO2dCQUNQZ0MsU0FBUztvQkFBQztvQkFBZ0I7b0JBQWM7aUJBQWE7Z0JBQ3JEQyxZQUFZLENBQUMsR0FBRyxFQUFFVCxLQUFLRyxPQUFPLENBQUMsT0FBTyxXQUFXLElBQUksQ0FBQztZQUN4RDtRQUNGO1FBRUEsTUFBTSxFQUFFeEIsTUFBTUMsUUFBUSxFQUFFMUIsS0FBSyxFQUFFLEdBQUcsTUFBTUssR0FDckNzQixJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQztZQUNOQyxZQUFZO1lBQ1pDLFVBQVU7WUFDVlIsT0FBT0QsT0FBT0MsS0FBSyxJQUFJO1lBQ3ZCUyxVQUFVM0IsS0FBSzJCLFFBQVE7WUFDdkJ6QixNQUFNRixLQUFLRSxJQUFJO1lBQ2ZGLE1BQU1pQjtZQUNOWSxXQUFXO1FBQ2IsR0FDQ0MsTUFBTSxHQUNOQyxNQUFNO1FBRVQsSUFBSW5DLE9BQU8sT0FBT1QscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFQyxPQUFPQSxNQUFNb0MsT0FBTztRQUFDLEdBQUc7WUFBRW5DLFFBQVE7UUFBSTtRQUM1RSxPQUFPVixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQUVzQyxTQUFTWDtRQUFTO0lBQy9DLEVBQUUsT0FBTzhCLEdBQVE7UUFDZi9DLFFBQVFULEtBQUssQ0FBQyxtQkFBbUJ3RDtRQUNqQyxPQUFPakUscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFQyxPQUFPd0QsRUFBRXBCLE9BQU8sSUFBSTtRQUFvQixHQUFHO1lBQUVuQyxRQUFRO1FBQUk7SUFDdEY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2thcmFza2lkZG9zLy4vYXBwL2FwaS9jb250ZW50L2dlbmVyYXRlL3JvdXRlLnRzPzI2YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0R2VtaW5pIH0gZnJvbSBcIkAvbGliL2dlbWluaVwiO1xuXG50eXBlIEdlbmVyYXRlQm9keSA9IHtcbiAgY2F0ZWdvcnk6IFwiYmVkdGltZVwiIHwgXCJnZXR0aW5nX291dF90aGVfZG9vclwiIHwgXCJjaG9yZXNcIiB8IFwibmV3X3NpdHVhdGlvbnNcIjtcbiAgdHlwZTogXCJjaGVja2xpc3RcIiB8IFwic3RvcnlcIiB8IFwic29uZ19seXJpY3NcIiB8IFwic2NoZWR1bGVcIiB8IFwiY2FsZW5kYXJcIjtcbiAgY2hpbGRJZD86IHN0cmluZztcbiAgcHJvbXB0Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiR0VNSU5JX0FQSV9LRVkgbm90IGNvbmZpZ3VyZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbiAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAhcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSAoYXdhaXQgcmVxLmpzb24oKSkgYXMgR2VuZXJhdGVCb2R5O1xuICAgIGNvbnN0IGRiID0gZ2V0U2VydmljZUNsaWVudCgpO1xuXG4gICAgLy8gRm9yIGNoZWNrbGlzdCB0eXBlLCBnZW5lcmF0ZSBhbiBpbWFnZSB1c2luZyBHZW1pbmkgMi41IEZsYXNoXG4gICAgaWYgKGJvZHkudHlwZSA9PT0gXCJjaGVja2xpc3RcIikge1xuICAgICAgY29uc3QgaW1hZ2VQcm9tcHQgPSBgQ3JlYXRlIGEgaWxsdXN0cmF0ZWQgY2hlY2tsaXN0LiB0aGlzIGNoZWNrbGlzdCBzaG91bGQgaGF2ZSBhIHdoaW1zaWNhbCB0aGVtZSwgYXBwcm9wcmlhdGUgZm9yIGxvb2tpbmcgZnVuL2V4Y2l0aW5nIHRvIGEgNSB5ZWFyIG9sZC4gTWFrZSB0aGUgcHJvdGFnb25pc3QgYSByYWluYm93IHVuaWNvcm4sIGV4Y2l0ZWQgdG8gZG8gZWFjaCBvZiB0aGUgc3RlcHMuIE1ha2UgaXQgbG9vayBwcm9mZXNzaW9uYWxseSBpbGx1c3RyYXRlZCBieSBhIGNoaWxkcmVuJ3MgYm9vayBhdXRob3IgbGlrZSBIb2xsaWUgTWVuZ2VydC5cblxuVGhlIG5hbWUgb2YgdGhlIGNoZWNrbGlzdCBzaG91bGQgYmU6IFJoZWEgVW5pY29ybiBnb2VzIHRvIGJlZFxuXG5PbiB0aGUgbGVmdCBjb2x1bW4sIHRoZSBjaGVja2xpc3Qgc2hvdWxkIGhhdmUgaW1hZ2VyeTpcblxuMSkgT24gdGhlIGZpcnN0IHJvdywgaXQgc2hvdWxkIHNob3cgdGhlIHJhaW5ib3cgdW5pY29ybiBicnVzaGluZyBoZXIgdGVldGggd2l0aCBhIHByb3VkIGV4cHJlc3Npb24gb24gaGVyIGZhY2UuIFVzZSBicmlnaHQgY29sb3JmdWwgY29sb3JzLlxuXG4yKSBPbiB0aGUgc2Vjb25kIHJvdywgaXQgc2hvdWxkIHNob3cgdGhlIHJhaW5ib3cgdW5pY29ybiBwdXR0aW5nIG9uIHBhamFtYXMgYnV0IHN0cnVnZ2xpbmcgd2l0aCBpdFxuXG4zKSBPbiB0aGUgdGhpcmQgcm93LCBpdCBzaG91bGQgc2hvdyB0aGUgcmFpbmJvdyB1bmljb3JuIHJlYWRpbmcgYSBib29rIGluIGJlZCB3aXRoIGhlciBleWVzIGNsb3NlZFxuXG5NYWtlIHRoZSB1bmljb3JuIGltYWdlcyB0YWtlIHVwIGhhbGYgdGhlIHBhZ2UuXG5cbk9uIHRoZSByaWdodCBjb2x1bW4sIGl0IHNob3VsZCBqdXN0IGZlYXR1cmUgMyBibGFuayByb3dzIChzbyB0aGF0IHRoZSBjaGlsZCBjYW4gd3JpdGUgaW4gdGhlbSlcblxuTWFrZSBpdCBnb29kIWA7XG5cbiAgICAgIC8vIFVzZSBHZW1pbmkgMi41IEZsYXNoIGZvciBpbWFnZSBnZW5lcmF0aW9uXG4gICAgICAvLyBOb3RlOiBHZW1pbmkgbW9kZWxzIGFyZSB0ZXh0IG1vZGVscyBhbmQgZG9uJ3QgZ2VuZXJhdGUgaW1hZ2VzIGRpcmVjdGx5XG4gICAgICAvLyBXZSdsbCBza2lwIGltYWdlIGdlbmVyYXRpb24gZm9yIG5vdyBhbmQgY3JlYXRlIHRoZSBjaGVja2xpc3RcbiAgICAgIGxldCBpbWFnZVVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICBcbiAgICAgIC8vIFNraXAgaW1hZ2UgZ2VuZXJhdGlvbiBmb3Igbm93IC0gR2VtaW5pIGRvZXNuJ3Qgc3VwcG9ydCBpdFxuICAgICAgLy8gVE9ETzogSW50ZWdyYXRlIHdpdGggYWN0dWFsIGltYWdlIGdlbmVyYXRpb24gQVBJIChJbWFnZW4sIERBTEwtRSwgZXRjLilcbiAgICAgIGNvbnNvbGUubG9nKFwiU2tpcHBpbmcgaW1hZ2UgZ2VuZXJhdGlvbiAtIEdlbWluaSAyLjUgRmxhc2ggaXMgYSB0ZXh0IG1vZGVsXCIpO1xuXG5cbiAgICAgIC8vIFBhcnNlIHJvdXRpbmUgaXRlbXMgZnJvbSBwcm9tcHQgaWYgYXZhaWxhYmxlXG4gICAgICBsZXQgc3RlcHMgPSBbXG4gICAgICAgIHsgbGFiZWw6IFwiYnJ1c2ggdGVldGhcIiwgdGlwOiBcIkdyZWF0IGpvYiBicnVzaGluZyFcIiB9LFxuICAgICAgICB7IGxhYmVsOiBcInB1dCBvbiBwYWphbWFzXCIsIHRpcDogXCJZb3UncmUgZG9pbmcgZ3JlYXQhXCIgfSxcbiAgICAgICAgeyBsYWJlbDogXCJyZWFkIGJvb2tcIiwgdGlwOiBcIlRpbWUgZm9yIGEgc3RvcnkhXCIgfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGlmIChib2R5LnByb21wdD8uaW5jbHVkZXMoXCJyb3V0aW5lIGluY2x1ZGVzOlwiKSkge1xuICAgICAgICBjb25zdCByb3V0aW5lUGFydCA9IGJvZHkucHJvbXB0LnNwbGl0KFwicm91dGluZSBpbmNsdWRlczpcIilbMV0/LnNwbGl0KFwiLlwiKVswXTtcbiAgICAgICAgaWYgKHJvdXRpbmVQYXJ0KSB7XG4gICAgICAgICAgc3RlcHMgPSByb3V0aW5lUGFydC5zcGxpdChcIixcIikubWFwKChzOiBzdHJpbmcpID0+ICh7XG4gICAgICAgICAgICBsYWJlbDogcy50cmltKCksXG4gICAgICAgICAgICB0aXA6IGBHcmVhdCBqb2Igb24gJHtzLnRyaW0oKX0hYCxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyc2VkID0ge1xuICAgICAgICB0aXRsZTogXCJSaGVhIFVuaWNvcm4gZ29lcyB0byBiZWRcIixcbiAgICAgICAgc3RlcHMsXG4gICAgICAgIGltYWdlX3VybDogaW1hZ2VVcmwsXG4gICAgICAgIGltYWdlX3Byb21wdDogaW1hZ2VQcm9tcHQsXG4gICAgICB9O1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IGluc2VydGVkLCBlcnJvciB9ID0gYXdhaXQgZGJcbiAgICAgICAgICAuZnJvbShcImNvbnRlbnRfaXRlbXNcIilcbiAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgIHByb2ZpbGVfaWQ6IG51bGwsXG4gICAgICAgICAgICBjaGlsZF9pZDogbnVsbCxcbiAgICAgICAgICAgIHRpdGxlOiBwYXJzZWQudGl0bGUsXG4gICAgICAgICAgICBjYXRlZ29yeTogYm9keS5jYXRlZ29yeSxcbiAgICAgICAgICAgIHR5cGU6IGJvZHkudHlwZSxcbiAgICAgICAgICAgIGJvZHk6IHBhcnNlZCxcbiAgICAgICAgICAgIGNvdmVyX3VybDogaW1hZ2VVcmwsXG4gICAgICAgICAgICBpc19wdWJsaWM6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGluc2VydCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY29udGVudDogaW5zZXJ0ZWQgfSk7XG4gICAgICB9IGNhdGNoIChkYkVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yOlwiLCBkYkVycm9yKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGRiRXJyb3IubWVzc2FnZSB8fCBcIkRhdGFiYXNlIGVycm9yXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgdHlwZXMsIHVzZSB0ZXh0IGdlbmVyYXRpb24gd2l0aCBHZW1pbmlcbiAgICBjb25zdCBnZW5BSSA9IGdldEdlbWluaSgpO1xuICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiIH0pO1xuXG4gICAgbGV0IGZ1bGxQcm9tcHQgPSBcIllvdSBhcmUgYSBoZWxwZXIgZm9yIHBhcmVudHMgb2YgeW91bmcgY2hpbGRyZW4uXFxuXFxuXCI7XG4gICAgY29uc3QgYmFzZVByb21wdCA9IGJvZHkucHJvbXB0ID8/IFwiQ3JlYXRlIGEgc3VwcG9ydGl2ZSwgYWdlLWFwcHJvcHJpYXRlIHBpZWNlIGZvciBhIHByZXNjaG9vbGVyLlwiO1xuICAgIFxuICAgIGlmIChib2R5LnR5cGUgPT09IFwic3RvcnlcIikge1xuICAgICAgZnVsbFByb21wdCArPSBgJHtiYXNlUHJvbXB0fVxcblxcbkNyZWF0ZSBhIHN1cHBvcnRpdmUgcGVyc29uYWxpemVkIHN0b3J5IGZvciBhIGNoaWxkIGFib3V0IHRoaXMgc2l0dWF0aW9uLiBSZXR1cm4gT05MWSB2YWxpZCBKU09OIGluIHRoaXMgZXhhY3QgZm9ybWF0OiB7XCJ0aXRsZVwiOiBcIlN0b3J5IFRpdGxlXCIsIFwib3V0bGluZVwiOiBbXCJwb2ludCAxXCIsIFwicG9pbnQgMlwiXSwgXCJzdG9yeV9odG1sXCI6IFwiPHA+RnVsbCBzdG9yeSBIVE1MIGhlcmU8L3A+XCJ9YDtcbiAgICB9IGVsc2UgaWYgKGJvZHkudHlwZSA9PT0gXCJzb25nX2x5cmljc1wiKSB7XG4gICAgICBmdWxsUHJvbXB0ICs9IGAke2Jhc2VQcm9tcHR9XFxuXFxuQ3JlYXRlIHBsYXlmdWwgYmVkdGltZSBzb25nIGx5cmljcyBvbmx5LiBSZXR1cm4gT05MWSB2YWxpZCBKU09OOiB7XCJ0aXRsZVwiOiBcIlNvbmcgVGl0bGVcIiwgXCJseXJpY3NcIjogXCJGdWxsIGx5cmljcyB0ZXh0XCIsIFwic3R5bGVcIjogXCJsdWxsYWJ5XCJ9YDtcbiAgICB9IGVsc2UgaWYgKGJvZHkudHlwZSA9PT0gXCJzY2hlZHVsZVwiIHx8IGJvZHkudHlwZSA9PT0gXCJjYWxlbmRhclwiKSB7XG4gICAgICBmdWxsUHJvbXB0ICs9IGAke2Jhc2VQcm9tcHR9XFxuXFxuQ3JlYXRlIGEgc2ltcGxlIHNjaGVkdWxlLiBSZXR1cm4gT05MWSB2YWxpZCBKU09OOiB7XCJ0aXRsZVwiOiBcIlNjaGVkdWxlIFRpdGxlXCIsIFwiaXRlbXNcIjogW3tcInRpbWVcIjogXCI5OjAwIEFNXCIsIFwibGFiZWxcIjogXCJBY3Rpdml0eVwifV19YDtcbiAgICB9XG5cbiAgICBmdWxsUHJvbXB0ICs9IFwiXFxuXFxuSW1wb3J0YW50OiBSZXR1cm4gT05MWSB0aGUgSlNPTiBvYmplY3QsIG5vIG1hcmtkb3duIGNvZGUgYmxvY2tzLCBubyBleHBsYW5hdGlvbiB0ZXh0LlwiO1xuXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChmdWxsUHJvbXB0KTtcbiAgICBsZXQgdGV4dCA9IGNvbXBsZXRpb24ucmVzcG9uc2UudGV4dCgpO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIG1hcmtkb3duIGNvZGUgYmxvY2tzIGlmIHByZXNlbnRcbiAgICB0ZXh0ID0gdGV4dC50cmltKCk7XG4gICAgaWYgKHRleHQuc3RhcnRzV2l0aChcImBgYGpzb25cIikpIHtcbiAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL15gYGBqc29uXFxzKi8sIFwiXCIpLnJlcGxhY2UoL1xccypgYGAkLywgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0ZXh0LnN0YXJ0c1dpdGgoXCJgYGBcIikpIHtcbiAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL15gYGBcXHMqLywgXCJcIikucmVwbGFjZSgvXFxzKmBgYCQvLCBcIlwiKTtcbiAgICB9XG4gICAgXG4gICAgbGV0IHBhcnNlZDogYW55O1xuICAgIHRyeSB7XG4gICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKHRleHQpO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJKU09OIHBhcnNlIGVycm9yOlwiLCBwYXJzZUVycm9yLCBcIlRleHQgd2FzOlwiLCB0ZXh0LnN1YnN0cmluZygwLCAyMDApKTtcbiAgICAgIC8vIEZhbGxiYWNrOiBjcmVhdGUgYSBzaW1wbGUgc3RydWN0dXJlXG4gICAgICBwYXJzZWQgPSB7XG4gICAgICAgIHRpdGxlOiBcIkdlbmVyYXRlZCBTdG9yeVwiLFxuICAgICAgICBvdXRsaW5lOiBbXCJJbnRyb2R1Y3Rpb25cIiwgXCJNYWluIHN0b3J5XCIsIFwiQ29uY2x1c2lvblwiXSxcbiAgICAgICAgc3RvcnlfaHRtbDogYDxwPiR7dGV4dC5yZXBsYWNlKC9cXG4vZywgXCI8L3A+PHA+XCIpfTwvcD5gLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGluc2VydGVkLCBlcnJvciB9ID0gYXdhaXQgZGJcbiAgICAgIC5mcm9tKFwiY29udGVudF9pdGVtc1wiKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIHByb2ZpbGVfaWQ6IG51bGwsXG4gICAgICAgIGNoaWxkX2lkOiBudWxsLFxuICAgICAgICB0aXRsZTogcGFyc2VkLnRpdGxlID8/IFwiR2VuZXJhdGVkXCIsXG4gICAgICAgIGNhdGVnb3J5OiBib2R5LmNhdGVnb3J5LFxuICAgICAgICB0eXBlOiBib2R5LnR5cGUsXG4gICAgICAgIGJvZHk6IHBhcnNlZCxcbiAgICAgICAgaXNfcHVibGljOiB0cnVlLFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGNvbnRlbnQ6IGluc2VydGVkIH0pO1xuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR2VuZXJhdGUgZXJyb3I6XCIsIGUpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlLm1lc3NhZ2UgfHwgXCJHZW5lcmF0aW9uIGZhaWxlZFwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmljZUNsaWVudCIsImdldEdlbWluaSIsIlBPU1QiLCJyZXEiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiYm9keSIsImRiIiwidHlwZSIsImltYWdlUHJvbXB0IiwiaW1hZ2VVcmwiLCJjb25zb2xlIiwibG9nIiwic3RlcHMiLCJsYWJlbCIsInRpcCIsInByb21wdCIsImluY2x1ZGVzIiwicm91dGluZVBhcnQiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwicGFyc2VkIiwidGl0bGUiLCJpbWFnZV91cmwiLCJpbWFnZV9wcm9tcHQiLCJkYXRhIiwiaW5zZXJ0ZWQiLCJmcm9tIiwiaW5zZXJ0IiwicHJvZmlsZV9pZCIsImNoaWxkX2lkIiwiY2F0ZWdvcnkiLCJjb3Zlcl91cmwiLCJpc19wdWJsaWMiLCJzZWxlY3QiLCJzaW5nbGUiLCJtZXNzYWdlIiwiY29udGVudCIsImRiRXJyb3IiLCJnZW5BSSIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwiZnVsbFByb21wdCIsImJhc2VQcm9tcHQiLCJjb21wbGV0aW9uIiwiZ2VuZXJhdGVDb250ZW50IiwidGV4dCIsInJlc3BvbnNlIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJwYXJzZUVycm9yIiwic3Vic3RyaW5nIiwib3V0bGluZSIsInN0b3J5X2h0bWwiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/content/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gemini.ts":
/*!***********************!*\
  !*** ./lib/gemini.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGemini: () => (/* binding */ getGemini)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst apiKey = process.env.GEMINI_API_KEY;\nfunction getGemini() {\n    return new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2VtaW5pLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEO0FBRTNELE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUVsQyxTQUFTQztJQUNkLE9BQU8sSUFBSUwscUVBQWtCQSxDQUFDQztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL2thcmFza2lkZG9zLy4vbGliL2dlbWluaS50cz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZUdlbmVyYXRpdmVBSSB9IGZyb20gXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIjtcblxuY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkhO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2VtaW5pKCkge1xuICByZXR1cm4gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXkpO1xufVxuXG5cbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJnZXRHZW1pbmkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/gemini.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServiceClient: () => (/* binding */ getServiceClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getServiceClient() {\n    const url = \"https://treseoebwfddtbapyfus.supabase.co\";\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url) {\n        throw new Error(\"NEXT_PUBLIC_SUPABASE_URL is not set\");\n    }\n    if (!serviceKey) {\n        throw new Error(\"SUPABASE_SERVICE_ROLE_KEY is not set\");\n    }\n    // Validate that the service key looks like a JWT (starts with eyJ)\n    if (!serviceKey.startsWith(\"eyJ\")) {\n        throw new Error(\"SUPABASE_SERVICE_ROLE_KEY appears to be invalid (should be a JWT token starting with 'eyJ')\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey, {\n        auth: {\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsMENBQW9DO0lBQ2hELE1BQU1HLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBRXhELElBQUksQ0FBQ0wsS0FBSztRQUNSLE1BQU0sSUFBSU0sTUFBTTtJQUNsQjtJQUVBLElBQUksQ0FBQ0YsWUFBWTtRQUNmLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUVBLG1FQUFtRTtJQUNuRSxJQUFJLENBQUNGLFdBQVdHLFVBQVUsQ0FBQyxRQUFRO1FBQ2pDLE1BQU0sSUFBSUQsTUFBTTtJQUNsQjtJQUVBLE9BQU9SLG1FQUFZQSxDQUFDRSxLQUFLSSxZQUFZO1FBQUVJLE1BQU07WUFBRUMsZ0JBQWdCO1FBQU07SUFBRTtBQUN6RSIsInNvdXJjZXMiOlsid2VicGFjazovL2thcmFza2lkZG9zLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VDbGllbnQoKSB7XG4gIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgY29uc3Qgc2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XG4gIFxuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBpcyBub3Qgc2V0XCIpO1xuICB9XG4gIFxuICBpZiAoIXNlcnZpY2VLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIGlzIG5vdCBzZXRcIik7XG4gIH1cbiAgXG4gIC8vIFZhbGlkYXRlIHRoYXQgdGhlIHNlcnZpY2Uga2V5IGxvb2tzIGxpa2UgYSBKV1QgKHN0YXJ0cyB3aXRoIGV5SilcbiAgaWYgKCFzZXJ2aWNlS2V5LnN0YXJ0c1dpdGgoXCJleUpcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIGFwcGVhcnMgdG8gYmUgaW52YWxpZCAoc2hvdWxkIGJlIGEgSldUIHRva2VuIHN0YXJ0aW5nIHdpdGggJ2V5SicpXCIpO1xuICB9XG4gIFxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSwgeyBhdXRoOiB7IHBlcnNpc3RTZXNzaW9uOiBmYWxzZSB9IH0pO1xufVxuXG5cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJnZXRTZXJ2aWNlQ2xpZW50IiwidXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiRXJyb3IiLCJzdGFydHNXaXRoIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Fgenerate%2Froute&page=%2Fapi%2Fcontent%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarayu%2Fprojects%2Fkaraskiddos&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();